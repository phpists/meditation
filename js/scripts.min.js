$(function () {
  // if ($(".youtube-link").length > 0) {
  //   $(".youtube-link").grtyoutube({ theme: "light" });
  // }
  $(".tabs-section__menu-items li")
    .click(function () {
      $(".tabs-section__menu-items li")
        .removeClass("active")
        .eq($(this).index())
        .addClass("active");
      $(".tabs-section__items--item").hide().eq($(this).index()).fadeIn();
    })
    .eq(0)
    .addClass("active");

  $(".header__top").after('<nav class="mobile-menu">');
  $(".header__top--menu nav ul")
    .clone()
    .attr("id", "menu")
    .appendTo(".mobile-menu");

  $(".header__top")
    .addClass("original")
    .clone()
    .insertAfter(".header__top")
    .addClass("cloned")
    .css("position", "fixed")
    .css("top", "-100%")
    .css("margin-top", "0")
    .css("z-index", "500")
    .css("transition", "1s ease-in-out")
    .removeClass("original")
    .css("top", "0");

  scrollIntervalID = setInterval(stickIt, 10);
  // stickIt()
  function stickIt() {
    var orgElementPos = $(".original").offset();
    orgElementTop = orgElementPos.top;
    var nextElement = $(".header__scroll").offset();
    nextElementTop = nextElement.top;

    if ($(window).scrollTop() >= orgElementTop + 100) {
      // scrolled past the original position; now only show the cloned, sticky element.

      // Cloned element should always have same left position and width as original element.
      orgElement = $(".original");

      coordsOrgElement = orgElement.offset();
      leftOrgElement = coordsOrgElement.left;
      widthOrgElement = orgElement.css("width");
      $(".cloned")
        .css("left", leftOrgElement + "px")
        .css("top", 0)
        .css("width", widthOrgElement)
        .css("display", "block");
      $(".original").css("top", "-100%");
    } else if ($(window).scrollTop() <= nextElementTop) {
      // not scrolled past the menu; only show the original menu.
      $(".cloned").css("top", "-100%");
      $(".original").css("top", "0");
    } else {
    }
  }

  // :: PreventDefault a Click
  // $("a[href='#']").on("click", function ($) {
  //   $.preventDefault();
  // });

  $(document).ready(function () {
    //toggle menu

    let block = '<button class="social-btn">Kontakt</button>';
    $(".hamburger-container").before(block);

    $(".social-btn").on("click", function () {
      $(".header__top--soc").toggleClass("active");
    });
    $("body").on("click", function (event) {
      console.log($(event.target).closest(".header__top--soc").length);
      if (!$(event.target).closest(".header__top--soc, .social-btn").length && $(".header__top--soc") ) {
        $(".header__top--soc").removeClass("active");
      }
    });

    $(".hamburger-container").click(function () {
      $(".mobile-menu").toggleClass("active");
      if ($("body").css("overflow") !== "hidden") {
        $("body").css("overflow", "hidden");
      } else {
        $("body").css("overflow", "auto");
      }
      $("body").toggleClass("mobile-opacity");
    });

    //to fix issue that toggle adds style(hides) to nav
    $(window).resize(function () {
      if (window.innerWidth > 1024) {
        $("#menu").removeAttr("style");
      }
    });

    //icon animation
    var topBar = $(".hamburger li:nth-child(1)"),
      middleBar = $(".hamburger li:nth-child(2)"),
      bottomBar = $(".hamburger li:nth-child(3)");

    $(".hamburger-container").on("click", function () {
      if (middleBar.hasClass("rot-45deg")) {
        topBar.removeClass("rot45deg");
        middleBar.removeClass("rot-45deg");
        bottomBar.removeClass("hidden");
      } else {
        bottomBar.addClass("hidden");
        topBar.addClass("rot45deg");
        middleBar.addClass("rot-45deg");
      }
    });
    if ($(".youtube-link").length > 0) {
      var video = {
        init: function () {
          video.play();
        },

        play: function () {
          jQuery("body").on("click", "#play-video-btn", function (e) {
            video.setSrc(this);
          });
        },

        setSrc: function (el) {
          if (el) {
            var video_id = jQuery(el).data("id");
            var url =
              "//www.youtube.com/embed/" +
              video_id +
              "?enablejsapi=1&version=3&showinfo=0&playerapiid=ytplayer&autoplay=1";
            jQuery("img#embed-video-preview").hide();
            jQuery("#play-video-btn").hide();
            jQuery("iframe#embed-video-frame").attr("src", url).fadeIn();
          }
        },
      };

      video.init();

      $(".youtube-link").grtyoutube({ theme: "light" });
    }

    if ($(".multiple-items").length > 0) {
      $(".multiple-items").slick({
        // infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3,
        dots: true,
        arrows: true,
        // autoplay: true,
        speed: 500,
        responsive: [
          {
            breakpoint: 1024,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 2,
              infinite: true,
              arrows: false,
            },
          },
          {
            breakpoint: 600,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
              dots: true,
              arrows: false,
            },
          },
          {
            breakpoint: 300,
            settings: "unslick", // destroys slick
          },
        ],
      });
    }
  });
});
$("#open-popup").on("click", function () {
  $.fancybox.open($(".popup"), {});
});
$(".open-product-popup").on("click", function () {
  $.fancybox.open($(".product-modal"), {});
});
$("#open-article-popup").on("click", function () {
  $.fancybox.open($(".popup__article"), {});
});

if ($(".contact-slider").length > 0) {
  $(".contact-slider").slick({
    slidesToShow: 1,
    arrows: true,
    responsive: [
      {
        breakpoint: 768,
        settings: {
          arrows: false,
          dots: true,
        },
      },
    ],
  });
}


function onThankOpen () {
  $(".thank-modal").fadeIn(500)
  setTimeout(function () {
    $(".thank-modal").fadeOut(1000)
    
  }, 1000)
 }

$("form:not(.popup__form)").on("submit", function (e) {
e.preventDefault()
onThankOpen()
})

$(".popup__form").on("submit", function (e){
  e.preventDefault()
  $.fancybox.close($(".popup"), {});
  onThankOpen()
})